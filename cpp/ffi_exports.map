# Linker version script to export only FFI C API symbols
# This ensures Python bindings only expose the public FFI interface

{
  global:
    # Result interface
    loon_ffi_is_success;
    loon_ffi_get_errmsg;
    loon_ffi_free_result;

    # Properties interface
    loon_properties_create;
    loon_properties_get;
    loon_properties_free;

    # Property key constants
    loon_properties_format;
    loon_properties_fs_address;
    loon_properties_fs_bucket_name;
    loon_properties_fs_access_key_id;
    loon_properties_fs_access_key_value;
    loon_properties_fs_root_path;
    loon_properties_fs_storage_type;
    loon_properties_fs_cloud_provider;
    loon_properties_fs_iam_endpoint;
    loon_properties_fs_log_level;
    loon_properties_fs_region;
    loon_properties_fs_use_ssl;
    loon_properties_fs_ssl_ca_cert;
    loon_properties_fs_use_iam;
    loon_properties_fs_use_virtual_host;
    loon_properties_fs_request_timeout_ms;
    loon_properties_fs_gcp_native_without_auth;
    loon_properties_fs_gcp_credential_json;
    loon_properties_fs_use_custom_part_upload;
    loon_properties_fs_max_connections;
    loon_properties_fs_multi_part_upload_size;
    loon_properties_writer_policy;
    loon_properties_writer_schema_base_patterns;
    loon_properties_writer_size_base_macs;
    loon_properties_writer_size_base_mcig;
    loon_properties_writer_buffer_size;
    loon_properties_writer_file_rolling_size;
    loon_properties_writer_compression;
    loon_properties_writer_compression_level;
    loon_properties_writer_enable_dictionary;
    loon_properties_writer_enc_enable;
    loon_properties_writer_enc_key;
    loon_properties_writer_enc_meta;
    loon_properties_writer_enc_algorithm;
    loon_properties_writer_vortex_enable_statistics;
    loon_properties_reader_record_batch_max_rows;
    loon_properties_reader_record_batch_max_size;
    loon_properties_reader_logical_chunk_rows;
    loon_properties_transaction_commit_num_retries;

    # Writer interface
    loon_writer_new;
    loon_writer_write;
    loon_writer_flush;
    loon_writer_close;
    loon_writer_destroy;
    loon_free_cstr;

    # FilesystemCache interface
    loon_filesystem_get;
    loon_filesystem_destroy;
    loon_close_filesystems;

    # FilesystemMetrics interface
    loon_filesystem_get_metrics;
    loon_filesystem_reset_metrics;

    # Reader interface
    loon_reader_new;
    loon_reader_set_keyretriever;
    loon_get_record_batch_reader;
    loon_get_chunk_reader;
    loon_take;
    loon_reader_destroy;

    # ChunkReader interface
    loon_get_chunk;
    loon_get_chunks;
    loon_free_chunk_arrays;
    loon_get_chunk_indices;
    loon_free_chunk_indices;
    loon_chunk_reader_destroy;
    loon_get_number_of_chunks;
    loon_get_chunk_metadatas;
    loon_free_chunk_metadatas;

    # ColumnGroups interface
    loon_column_groups_create;
    loon_column_groups_destroy;
    loon_column_groups_debug_string;

    # Manifest interface
    loon_manifest_destroy;
    loon_manifest_debug_string;

    # ThreadPool interface
    loon_thread_pool_singleton;
    loon_thread_pool_singleton_release;

    # Transaction interface
    loon_transaction_begin;
    loon_transaction_get_manifest;
    loon_transaction_get_read_version;
    loon_transaction_commit;
    loon_transaction_destroy;
    loon_transaction_add_column_group;
    loon_transaction_append_files;
    loon_transaction_add_delta_log;
    loon_transaction_update_stat;

    # External table interface
    loon_exttable_explore;
    loon_exttable_get_file_info;
    loon_exttable_read_manifest;

    # Filesystem interface
    loon_filesystem_open_writer;
    loon_filesystem_writer_write;
    loon_filesystem_writer_flush;
    loon_filesystem_writer_close;
    loon_filesystem_writer_destroy;
    loon_filesystem_get_file_info;
    loon_filesystem_read_file;
    loon_filesystem_open_reader;
    loon_filesystem_reader_readat;
    loon_filesystem_reader_close;
    loon_filesystem_reader_destroy;
    loon_initialize_filesystem_singleton;
    loon_get_filesystem_singleton_handle;
    loon_filesystem_get_file_stats;
    loon_filesystem_free_meta_array;
    loon_filesystem_read_file_all;
    loon_filesystem_write_file;
    loon_filesystem_delete_file;
    loon_filesystem_get_path_info;
    loon_filesystem_create_dir;
    loon_filesystem_list_dir;
    loon_filesystem_free_file_info_list;

    # Fault injection interface
    loon_fiu_enable;
    loon_fiu_disable;
    loon_fiu_disable_all;
    loon_fiu_is_enabled;

    # Fault injection point names
    # Writer
    loon_fiukey_writer_write_fail;
    loon_fiukey_writer_flush_fail;
    loon_fiukey_writer_close_fail;
    # Reader (low-level)
    loon_fiukey_column_group_read_fail;
    loon_fiukey_take_rows_fail;
    loon_fiukey_chunk_reader_read_fail;
    loon_fiukey_reader_open_fail;
    # Transaction/Manifest
    loon_fiukey_manifest_commit_fail;
    loon_fiukey_manifest_read_fail;
    loon_fiukey_manifest_write_fail;
    # Filesystem
    loon_fiukey_fs_open_output_fail;
    loon_fiukey_fs_open_input_fail;
    # S3 Filesystem
    loon_fiukey_s3fs_create_upload_fail;
    loon_fiukey_s3fs_part_upload_fail;
    loon_fiukey_s3fs_complete_upload_fail;
    loon_fiukey_s3fs_read_fail;
    loon_fiukey_s3fs_readat_fail;
    # ColumnGroup
    loon_fiukey_column_group_write_fail;

  local:
    # Hide all other symbols
    *;
};
