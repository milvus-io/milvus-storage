# Linker version script to export only FFI C API symbols
# This ensures Python bindings only expose the public FFI interface

{
  global:
    # Result interface
    loon_ffi_is_success;
    loon_ffi_get_errmsg;
    loon_ffi_free_result;

    # Properties interface
    loon_properties_create;
    loon_properties_get;
    loon_properties_free;

    # Writer interface
    loon_writer_new;
    loon_writer_write;
    loon_writer_flush;
    loon_writer_close;
    loon_writer_destroy;
    loon_free_cstr;

    # FilesystemCache interface
    loon_filesystem_get;
    loon_filesystem_destroy;
    loon_close_filesystems;

    # FilesystemMetrics interface
    loon_filesystem_get_metrics;
    loon_filesystem_reset_metrics;

    # Reader interface
    loon_reader_new;
    loon_reader_set_keyretriever;
    loon_get_record_batch_reader;
    loon_get_chunk_reader;
    loon_take;
    loon_reader_destroy;

    # ChunkReader interface
    loon_get_chunk;
    loon_get_chunks;
    loon_free_chunk_arrays;
    loon_get_chunk_indices;
    loon_free_chunk_indices;
    loon_chunk_reader_destroy;
    
    # ColumnGroups interface
    loon_column_groups_create;
    loon_column_groups_destroy;
    
    # ThreadPool interface
    loon_thread_pool_singleton;
    loon_thread_pool_singleton_release;
    
    # Transaction interface
    loon_transaction_begin;
    loon_transaction_get_manifest;
    loon_transaction_get_read_version;
    loon_transaction_commit;
    loon_transaction_destroy;
    loon_transaction_add_column_group;
    loon_transaction_append_files;
    loon_transaction_add_delta_log;
    loon_transaction_update_stat;

    # Chunk Metadata
    loon_get_number_of_chunks;
    loon_get_chunk_metadatas;
    loon_free_chunk_metadatas;

  local:
    # Hide all other symbols
    *;
};
